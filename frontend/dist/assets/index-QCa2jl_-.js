import{i as Q,R as p,k as _t,r as I,j as s,B as at}from"./index-Bfe_xoWe.js";import{C as X,a as Y,b as Z,c as J}from"./card-C-3EPjpD.js";import{f as E,r as kt,d as Qt,e as St,g as er,i as H,h as nt,p as te,L as M,j as $t,k as it,l as Et,D as Nt,C as Tt,m as re,n as ne,S as tr,A as Dt,o as rr,q as oe,s as Ct,t as B,u as It,v as Lt,G as Rt,w as Ne,x as zt,y as He,z as nr,E as _e,F as De,H as ir,I as ar,J as or,K as sr,M as lr,N as Ft,O as Bt,P as Mt,Q as Kt,U as cr,V as ur,W as ot,Z as Vt,X as qe,Y as Xe,_ as fr,$ as dr,T as hr,a as pr,b as ke,c as st,R as Se,a0 as $e}from"./generateCategoricalChart-Do3X8DhU.js";import{H as mr,T as vr,M as yr}from"./theme-switch-BjwiKpR5.js";import"./index-CZ3jPLKQ.js";import"./index-ZcquDgY9.js";import"./createLucideIcon-D4fp6AvF.js";import"./index-BrGJxdOk.js";import"./index-DmniG-u3.js";import"./index-CAv9oZIZ.js";import"./separator-BE2uk057.js";import"./dropdown-menu-_kFiOKFk.js";import"./createReactComponent-C46LlQ4r.js";import"./x-C3Wykusl.js";import"./index-0fGzjOH5.js";import"./index-ZRxCricZ.js";import"./check-BkV7RndE.js";var gr=["points","className","baseLinePoints","connectNulls"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(this,arguments)}function xr(e,t){if(e==null)return{};var n=br(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function br(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function lt(e){return Pr(e)||Or(e)||jr(e)||Ar()}function Ar(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jr(e,t){if(e){if(typeof e=="string")return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}}function Or(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pr(e){if(Array.isArray(e))return Ye(e)}function Ye(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct=function(t){return t&&t.x===+t.x&&t.y===+t.y},wr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){ct(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),ct(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Ae=function(t,n){var r=wr(t);n&&(r=[r.reduce(function(o,a){return[].concat(lt(o),lt(a))},[])]);var i=r.map(function(o){return o.reduce(function(a,l,f){return"".concat(a).concat(f===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},_r=function(t,n,r){var i=Ae(t,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Ae(n.reverse(),r).slice(1))},kr=function(t){var n=t.points,r=t.className,i=t.baseLinePoints,o=t.connectNulls,a=xr(t,gr);if(!n||!n.length)return null;var l=Q("recharts-polygon",r);if(i&&i.length){var f=a.stroke&&a.stroke!=="none",c=_r(n,i,o);return p.createElement("g",{className:l},p.createElement("path",me({},E(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:c})),f?p.createElement("path",me({},E(a,!0),{fill:"none",d:Ae(n,o)})):null,f?p.createElement("path",me({},E(a,!0),{fill:"none",d:Ae(i,o)})):null)}var u=Ae(n,o);return p.createElement("path",me({},E(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",className:l,d:u}))},Ge,ut;function Sr(){if(ut)return Ge;ut=1;var e=kt(),t=Qt(),n=St();function r(i,o){return i&&i.length?e(i,n(o,2),t):void 0}return Ge=r,Ge}var $r=Sr();const Er=_t($r);var Ue,ft;function Nr(){if(ft)return Ue;ft=1;var e=kt(),t=St(),n=er();function r(i,o){return i&&i.length?e(i,t(o,2),n):void 0}return Ue=r,Ue}var Tr=Nr();const Dr=_t(Tr);var Cr=["cx","cy","angle","ticks","axisLine"],Ir=["ticks","tick","angle","tickFormatter","stroke"];function ye(e){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(e)}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dt(Object(n),!0).forEach(function(r){ze(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ht(e,t){if(e==null)return{};var n=Lr(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Lr(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gt(r.key),r)}}function zr(e,t,n){return t&&pt(e.prototype,t),n&&pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fr(e,t,n){return t=Ce(t),Br(e,Wt()?Reflect.construct(t,n||[],Ce(e).constructor):t.apply(e,n))}function Br(e,t){if(t&&(ye(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mr(e)}function Mr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wt=function(){return!!e})()}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ce(e)}function Kr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}function Ze(e,t){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ze(e,t)}function ze(e,t,n){return t=Gt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e){var t=Vr(e,"string");return ye(t)=="symbol"?t:t+""}function Vr(e,t){if(ye(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ye(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fe=function(e){function t(){return Rr(this,t),Fr(this,t,arguments)}return Kr(t,e),zr(t,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,a=o.angle,l=o.cx,f=o.cy;return te(l,f,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,l=r.ticks,f=Er(l,function(u){return u.coordinate||0}),c=Dr(l,function(u){return u.coordinate||0});return{cx:i,cy:o,startAngle:a,endAngle:a,innerRadius:c.coordinate||0,outerRadius:f.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,l=r.ticks,f=r.axisLine,c=ht(r,Cr),u=l.reduce(function(m,h){return[Math.min(m[0],h.coordinate),Math.max(m[1],h.coordinate)]},[1/0,-1/0]),v=te(i,o,u[0],a),d=te(i,o,u[1],a),y=ie(ie(ie({},E(c,!1)),{},{fill:"none"},E(f,!1)),{},{x1:v.x,y1:v.y,x2:d.x,y2:d.y});return p.createElement("line",je({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,l=i.angle,f=i.tickFormatter,c=i.stroke,u=ht(i,Ir),v=this.getTickTextAnchor(),d=E(u,!1),y=E(a,!1),m=o.map(function(h,g){var A=r.getTickValueCoord(h),b=ie(ie(ie(ie({textAnchor:v,transform:"rotate(".concat(90-l,", ").concat(A.x,", ").concat(A.y,")")},d),{},{stroke:"none",fill:c},y),{},{index:g},A),{},{payload:h});return p.createElement(M,je({className:Q("recharts-polar-radius-axis-tick",$t(a)),key:"tick-".concat(h.coordinate)},it(r.props,h,g)),t.renderTickItem(a,b,f?f(h.value,g):h.value))});return p.createElement(M,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,a=r.tick;return!i||!i.length?null:p.createElement(M,{className:Q("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),a&&this.renderTicks(),Et.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return p.isValidElement(r)?a=p.cloneElement(r,i):H(r)?a=r(i):a=p.createElement(nt,je({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),a}}])}(I.PureComponent);ze(Fe,"displayName","PolarRadiusAxis");ze(Fe,"axisType","radiusAxis");ze(Fe,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ge(e){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(e)}function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mt(Object(n),!0).forEach(function(r){Be(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ht(r.key),r)}}function Gr(e,t,n){return t&&vt(e.prototype,t),n&&vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ur(e,t,n){return t=Ie(t),Hr(e,Ut()?Reflect.construct(t,n||[],Ie(e).constructor):t.apply(e,n))}function Hr(e,t){if(t&&(ge(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qr(e)}function qr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ut=function(){return!!e})()}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ie(e)}function Xr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Je(e,t)}function Be(e,t,n){return t=Ht(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e){var t=Yr(e,"string");return ge(t)=="symbol"?t:t+""}function Yr(e,t){if(ge(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ge(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zr=Math.PI/180,Jr=1e-5,Me=function(e){function t(){return Wr(this,t),Ur(this,t,arguments)}return Xr(t,e),Gr(t,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,a=i.cy,l=i.radius,f=i.orientation,c=i.tickSize,u=c||8,v=te(o,a,l,r.coordinate),d=te(o,a,l+(f==="inner"?-1:1)*u,r.coordinate);return{x1:v.x,y1:v.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*Zr),a;return o>Jr?a=i==="outer"?"start":"end":o<-1e-5?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.radius,l=r.axisLine,f=r.axisLineType,c=ae(ae({},E(this.props,!1)),{},{fill:"none"},E(l,!1));if(f==="circle")return p.createElement(Nt,se({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:o,r:a}));var u=this.props.ticks,v=u.map(function(d){return te(i,o,a,d.coordinate)});return p.createElement(kr,se({className:"recharts-polar-angle-axis-line"},c,{points:v}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,l=i.tickLine,f=i.tickFormatter,c=i.stroke,u=E(this.props,!1),v=E(a,!1),d=ae(ae({},u),{},{fill:"none"},E(l,!1)),y=o.map(function(m,h){var g=r.getTickLineCoord(m),A=r.getTickTextAnchor(m),b=ae(ae(ae({textAnchor:A},u),{},{stroke:"none",fill:c},v),{},{index:h,payload:m,x:g.x2,y:g.y2});return p.createElement(M,se({className:Q("recharts-polar-angle-axis-tick",$t(a)),key:"tick-".concat(m.coordinate)},it(r.props,m,h)),l&&p.createElement("line",se({className:"recharts-polar-angle-axis-tick-line"},d,g)),a&&t.renderTickItem(a,b,f?f(m.value,h):m.value))});return p.createElement(M,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,a=r.axisLine;return o<=0||!i||!i.length?null:p.createElement(M,{className:Q("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var a;return p.isValidElement(r)?a=p.cloneElement(r,i):H(r)?a=r(i):a=p.createElement(nt,se({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),a}}])}(I.PureComponent);Be(Me,"displayName","PolarAngleAxis");Be(Me,"axisType","angleAxis");Be(Me,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Te;function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yt(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xt(r.key),r)}}function en(e,t,n){return t&&gt(e.prototype,t),n&&gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tn(e,t,n){return t=Le(t),rn(e,qt()?Reflect.construct(t,n||[],Le(e).constructor):t.apply(e,n))}function rn(e,t){if(t&&(xe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(e)}function nn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qt=function(){return!!e})()}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Le(e)}function an(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Qe(e,t)}function W(e,t,n){return t=Xt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xt(e){var t=on(e,"string");return xe(t)=="symbol"?t:t+""}function on(e,t){if(xe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ee=function(e){function t(n){var r;return Qr(this,t),r=tn(this,t,[n]),W(r,"pieRef",null),W(r,"sectorRefs",[]),W(r,"id",Lt("recharts-pie-")),W(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),H(i)&&i()}),W(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),H(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return an(t,e),en(t,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.label,l=o.labelLine,f=o.dataKey,c=o.valueKey,u=E(this.props,!1),v=E(a,!1),d=E(l,!1),y=a&&a.offsetRadius||20,m=r.map(function(h,g){var A=(h.startAngle+h.endAngle)/2,b=te(h.cx,h.cy,h.outerRadius+y,A),w=P(P(P(P({},u),h),{},{stroke:"none"},v),{},{index:g,textAnchor:t.getTextAnchor(b.x,h.cx)},b),T=P(P(P(P({},u),h),{},{fill:"none",stroke:h.fill},d),{},{index:g,points:[te(h.cx,h.cy,h.outerRadius,A),b]}),O=f;return re(f)&&re(c)?O="value":re(f)&&(O=c),p.createElement(M,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(g)},l&&t.renderLabelLineItem(l,T,"line"),t.renderLabelItem(a,w,ne(h,O)))});return p.createElement(M,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,a=o.activeShape,l=o.blendStroke,f=o.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var v=i.isActiveIndex(u),d=f&&i.hasActiveIndex()?f:null,y=v?a:d,m=P(P({},c),{},{stroke:l?c.fill:c.stroke,tabIndex:-1});return p.createElement(M,ve({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},it(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),p.createElement(tr,ve({option:y,isActive:v,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,a=i.isAnimationActive,l=i.animationBegin,f=i.animationDuration,c=i.animationEasing,u=i.animationId,v=this.state,d=v.prevSectors,y=v.prevIsAnimationActive;return p.createElement(Dt,{begin:l,duration:f,isActive:a,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var h=m.t,g=[],A=o&&o[0],b=A.startAngle;return o.forEach(function(w,T){var O=d&&d[T],S=T>0?rr(w,"paddingAngle",0):0;if(O){var N=oe(O.endAngle-O.startAngle,w.endAngle-w.startAngle),_=P(P({},w),{},{startAngle:b+S,endAngle:b+N(h)+S});g.push(_),b=_.endAngle}else{var D=w.endAngle,k=w.startAngle,C=oe(0,D-k),j=C(h),z=P(P({},w),{},{startAngle:b+S,endAngle:b+j+S});g.push(z),b=z.endAngle}}),p.createElement(M,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,a=this.state.prevSectors;return o&&i&&i.length&&(!a||!Ct(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,a=i.sectors,l=i.className,f=i.label,c=i.cx,u=i.cy,v=i.innerRadius,d=i.outerRadius,y=i.isAnimationActive,m=this.state.isAnimationFinished;if(o||!a||!a.length||!B(c)||!B(u)||!B(v)||!B(d))return null;var h=Q("recharts-pie",l);return p.createElement(M,{tabIndex:this.props.rootTabIndex,className:h,ref:function(A){r.pieRef=A}},this.renderSectors(),f&&this.renderLabels(a),Et.renderCallByParent(this.props,null,!1),(!y||m)&&It.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(p.isValidElement(r))return p.cloneElement(r,i);if(H(r))return r(i);var a=Q("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return p.createElement(Tt,ve({},i,{key:o,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,o){if(p.isValidElement(r))return p.cloneElement(r,i);var a=o;if(H(r)&&(a=r(i),p.isValidElement(a)))return a;var l=Q("recharts-pie-label-text",typeof r!="boolean"&&!H(r)?r.className:"");return p.createElement(nt,ve({},i,{alignmentBaseline:"middle",className:l}),a)}}])}(I.PureComponent);Te=ee;W(ee,"displayName","Pie");W(ee,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Rt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});W(ee,"parseDeltaAngle",function(e,t){var n=Ne(t-e),r=Math.min(Math.abs(t-e),360);return n*r});W(ee,"getRealPieData",function(e){var t=e.data,n=e.children,r=E(e,!1),i=zt(n,He);return t&&t.length?t.map(function(o,a){return P(P(P({payload:o},r),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return P(P({},r),o.props)}):[]});W(ee,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,i=t.width,o=t.height,a=nr(i,o),l=r+_e(e.cx,i,i/2),f=n+_e(e.cy,o,o/2),c=_e(e.innerRadius,a,0),u=_e(e.outerRadius,a,a*.8),v=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:l,cy:f,innerRadius:c,outerRadius:u,maxRadius:v}});W(ee,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?P(P({},t.type.defaultProps),t.props):t.props,i=Te.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,a=r.startAngle,l=r.endAngle,f=r.paddingAngle,c=r.dataKey,u=r.nameKey,v=r.valueKey,d=r.tooltipType,y=Math.abs(r.minAngle),m=Te.parseCoordinateOfPie(r,n),h=Te.parseDeltaAngle(a,l),g=Math.abs(h),A=c;re(c)&&re(v)?(De(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A="value"):re(c)&&(De(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A=v);var b=i.filter(function(_){return ne(_,A,0)!==0}).length,w=(g>=360?b:b-1)*f,T=g-b*y-w,O=i.reduce(function(_,D){var k=ne(D,A,0);return _+(B(k)?k:0)},0),S;if(O>0){var N;S=i.map(function(_,D){var k=ne(_,A,0),C=ne(_,u,D),j=(B(k)?k:0)/O,z;D?z=N.endAngle+Ne(h)*f*(k!==0?1:0):z=a;var q=z+Ne(h)*((k!==0?y:0)+j*T),G=(z+q)/2,K=(m.innerRadius+m.outerRadius)/2,fe=[{name:C,value:k,payload:_,dataKey:A,type:d}],de=te(m.cx,m.cy,K,G);return N=P(P(P({percent:j,cornerRadius:o,name:C,tooltipPayload:fe,midAngle:G,middleRadius:K,tooltipPosition:de},_),m),{},{value:ne(_,A),startAngle:z,endAngle:q,payload:_,paddingAngle:Ne(h)*f}),N})}return P(P({},m),{},{sectors:S,data:i})});var sn=["x1","y1","x2","y2","key"],ln=["offset"];function ue(e){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(e)}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xt(Object(n),!0).forEach(function(r){cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cn(e,t,n){return t=un(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e){var t=fn(e,"string");return ue(t)=="symbol"?t:t+""}function fn(e,t){if(ue(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ue(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}function bt(e,t){if(e==null)return{};var n=dn(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dn(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var hn=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,o=t.y,a=t.width,l=t.height,f=t.ry;return p.createElement("rect",{x:i,y:o,ry:f,width:a,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Yt(e,t){var n;if(p.isValidElement(e))n=p.cloneElement(e,t);else if(H(e))n=e(t);else{var r=t.x1,i=t.y1,o=t.x2,a=t.y2,l=t.key,f=bt(t,sn),c=E(f,!1);c.offset;var u=bt(c,ln);n=p.createElement("line",le({},u,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:l}))}return n}function pn(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,o=e.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(l,f){var c=R(R({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(f),index:f});return Yt(i,c)});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function mn(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,o=e.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(l,f){var c=R(R({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(f),index:f});return Yt(i,c)});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function vn(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,o=e.width,a=e.height,l=e.horizontalPoints,f=e.horizontal,c=f===void 0?!0:f;if(!c||!t||!t.length)return null;var u=l.map(function(d){return Math.round(d+i-i)}).sort(function(d,y){return d-y});i!==u[0]&&u.unshift(0);var v=u.map(function(d,y){var m=!u[y+1],h=m?i+a-d:u[y+1]-d;if(h<=0)return null;var g=y%t.length;return p.createElement("rect",{key:"react-".concat(y),y:d,x:r,height:h,width:o,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},v)}function yn(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,o=e.x,a=e.y,l=e.width,f=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(d){return Math.round(d+o-o)}).sort(function(d,y){return d-y});o!==u[0]&&u.unshift(0);var v=u.map(function(d,y){var m=!u[y+1],h=m?o+l-d:u[y+1]-d;if(h<=0)return null;var g=y%r.length;return p.createElement("rect",{key:"react-".concat(y),x:d,y:a,width:h,height:f,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},v)}var gn=function(t,n){var r=t.xAxis,i=t.width,o=t.height,a=t.offset;return Ft(Bt(R(R(R({},Kt.defaultProps),r),{},{ticks:Mt(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,n)},xn=function(t,n){var r=t.yAxis,i=t.width,o=t.height,a=t.offset;return Ft(Bt(R(R(R({},Kt.defaultProps),r),{},{ticks:Mt(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,n)},he={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function et(e){var t,n,r,i,o,a,l=ir(),f=ar(),c=or(),u=R(R({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:he.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:he.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:he.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:he.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:he.vertical,verticalFill:(a=e.verticalFill)!==null&&a!==void 0?a:he.verticalFill,x:B(e.x)?e.x:c.left,y:B(e.y)?e.y:c.top,width:B(e.width)?e.width:c.width,height:B(e.height)?e.height:c.height}),v=u.x,d=u.y,y=u.width,m=u.height,h=u.syncWithTicks,g=u.horizontalValues,A=u.verticalValues,b=sr(),w=lr();if(!B(y)||y<=0||!B(m)||m<=0||!B(v)||v!==+v||!B(d)||d!==+d)return null;var T=u.verticalCoordinatesGenerator||gn,O=u.horizontalCoordinatesGenerator||xn,S=u.horizontalPoints,N=u.verticalPoints;if((!S||!S.length)&&H(O)){var _=g&&g.length,D=O({yAxis:w?R(R({},w),{},{ticks:_?g:w.ticks}):void 0,width:l,height:f,offset:c},_?!0:h);De(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ue(D),"]")),Array.isArray(D)&&(S=D)}if((!N||!N.length)&&H(T)){var k=A&&A.length,C=T({xAxis:b?R(R({},b),{},{ticks:k?A:b.ticks}):void 0,width:l,height:f,offset:c},k?!0:h);De(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ue(C),"]")),Array.isArray(C)&&(N=C)}return p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(hn,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),p.createElement(pn,le({},u,{offset:c,horizontalPoints:S,xAxis:b,yAxis:w})),p.createElement(mn,le({},u,{offset:c,verticalPoints:N,xAxis:b,yAxis:w})),p.createElement(vn,le({},u,{horizontalPoints:S})),p.createElement(yn,le({},u,{verticalPoints:N})))}et.displayName="CartesianGrid";var bn=["type","layout","connectNulls","ref"],An=["key"];function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function At(e,t){if(e==null)return{};var n=jn(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jn(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jt(Object(n),!0).forEach(function(r){U(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pe(e){return _n(e)||wn(e)||Pn(e)||On()}function On(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pn(e,t){if(e){if(typeof e=="string")return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}}function wn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _n(e){if(Array.isArray(e))return tt(e)}function tt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jt(r.key),r)}}function Sn(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $n(e,t,n){return t=Re(t),En(e,Zt()?Reflect.construct(t,n||[],Re(e).constructor):t.apply(e,n))}function En(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nn(e)}function Nn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zt=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Re(e)}function Tn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rt(e,t)}function U(e,t,n){return t=Jt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){var t=Dn(e,"string");return be(t)=="symbol"?t:t+""}function Dn(e,t){if(be(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(be(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ce=function(e){function t(){var n;kn(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=$n(this,t,[].concat(i)),U(n,"state",{isAnimationFinished:!0,totalLength:0}),U(n,"generateSimpleStrokeDasharray",function(a,l){return"".concat(l,"px ").concat(a-l,"px")}),U(n,"getStrokeDasharray",function(a,l,f){var c=f.reduce(function(A,b){return A+b});if(!c)return n.generateSimpleStrokeDasharray(l,a);for(var u=Math.floor(a/c),v=a%c,d=l-a,y=[],m=0,h=0;m<f.length;h+=f[m],++m)if(h+f[m]>v){y=[].concat(pe(f.slice(0,m)),[v-h]);break}var g=y.length%2===0?[0,d]:[d];return[].concat(pe(t.repeat(f,u)),pe(y),g).map(function(A){return"".concat(A,"px")}).join(", ")}),U(n,"id",Lt("recharts-line-")),U(n,"pathRef",function(a){n.mainCurve=a}),U(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),U(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Tn(t,e),Sn(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,l=o.xAxis,f=o.yAxis,c=o.layout,u=o.children,v=zt(u,cr);if(!v)return null;var d=function(h,g){return{x:h.x,y:h.y,value:h.value,errorVal:ne(h.payload,g)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return p.createElement(M,y,v.map(function(m){return p.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:a,xAxis:l,yAxis:f,layout:c,dataPointFormatter:d})}))}},{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,f=l.dot,c=l.points,u=l.dataKey,v=E(this.props,!1),d=E(f,!0),y=c.map(function(h,g){var A=V(V(V({key:"dot-".concat(g),r:3},v),d),{},{index:g,cx:h.x,cy:h.y,value:h.value,dataKey:u,payload:h.payload,points:c});return t.renderDotItem(f,A)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return p.createElement(M,Oe({className:"recharts-line-dots",key:"dots"},m),y)}},{key:"renderCurveStatically",value:function(r,i,o,a){var l=this.props,f=l.type,c=l.layout,u=l.connectNulls;l.ref;var v=At(l,bn),d=V(V(V({},E(v,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},a),{},{type:f,layout:c,connectNulls:u});return p.createElement(Tt,Oe({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,a=this.props,l=a.points,f=a.strokeDasharray,c=a.isAnimationActive,u=a.animationBegin,v=a.animationDuration,d=a.animationEasing,y=a.animationId,m=a.animateNewValues,h=a.width,g=a.height,A=this.state,b=A.prevPoints,w=A.totalLength;return p.createElement(Dt,{begin:u,duration:v,isActive:c,easing:d,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var O=T.t;if(b){var S=b.length/l.length,N=l.map(function(j,z){var q=Math.floor(z*S);if(b[q]){var G=b[q],K=oe(G.x,j.x),fe=oe(G.y,j.y);return V(V({},j),{},{x:K(O),y:fe(O)})}if(m){var de=oe(h*2,j.x),x=oe(g/2,j.y);return V(V({},j),{},{x:de(O),y:x(O)})}return V(V({},j),{},{x:j.x,y:j.y})});return o.renderCurveStatically(N,r,i)}var _=oe(0,w),D=_(O),k;if(f){var C="".concat(f).split(/[,\s]+/gim).map(function(j){return parseFloat(j)});k=o.getStrokeDasharray(D,w,C)}else k=o.generateSimpleStrokeDasharray(w,D);return o.renderCurveStatically(l,r,i,{strokeDasharray:k})})}},{key:"renderCurve",value:function(r,i){var o=this.props,a=o.points,l=o.isAnimationActive,f=this.state,c=f.prevPoints,u=f.totalLength;return l&&a&&a.length&&(!c&&u>0||!Ct(c,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,l=i.points,f=i.className,c=i.xAxis,u=i.yAxis,v=i.top,d=i.left,y=i.width,m=i.height,h=i.isAnimationActive,g=i.id;if(o||!l||!l.length)return null;var A=this.state.isAnimationFinished,b=l.length===1,w=Q("recharts-line",f),T=c&&c.allowDataOverflow,O=u&&u.allowDataOverflow,S=T||O,N=re(g)?this.id:g,_=(r=E(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},D=_.r,k=D===void 0?3:D,C=_.strokeWidth,j=C===void 0?2:C,z=ur(a)?a:{},q=z.clipDot,G=q===void 0?!0:q,K=k*2+j;return p.createElement(M,{className:w},T||O?p.createElement("defs",null,p.createElement("clipPath",{id:"clipPath-".concat(N)},p.createElement("rect",{x:T?d:d-y/2,y:O?v:v-m/2,width:T?y:y*2,height:O?m:m*2})),!G&&p.createElement("clipPath",{id:"clipPath-dots-".concat(N)},p.createElement("rect",{x:d-K/2,y:v-K/2,width:y+K,height:m+K}))):null,!b&&this.renderCurve(S,N),this.renderErrorBar(S,N),(b||a)&&this.renderDots(S,G,N),(!h||A)&&It.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(pe(r),[0]):r,a=[],l=0;l<i;++l)a=[].concat(pe(a),pe(o));return a}},{key:"renderDotItem",value:function(r,i){var o;if(p.isValidElement(r))o=p.cloneElement(r,i);else if(H(r))o=r(i);else{var a=i.key,l=At(i,An),f=Q("recharts-line-dot",typeof r!="boolean"?r.className:"");o=p.createElement(Nt,Oe({key:a},l,{className:f}))}return o}}])}(I.PureComponent);U(ce,"displayName","Line");U(ce,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Rt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});U(ce,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,a=e.dataKey,l=e.bandSize,f=e.displayedData,c=e.offset,u=t.layout,v=f.map(function(d,y){var m=ne(d,a);return u==="horizontal"?{x:ot({axis:n,ticks:i,bandSize:l,entry:d,index:y}),y:re(m)?null:r.scale(m),value:m,payload:d}:{x:re(m)?null:n.scale(m),y:ot({axis:r,ticks:o,bandSize:l,entry:d,index:y}),value:m,payload:d}});return V({points:v,layout:u},c)});var Pt=Vt({chartName:"LineChart",GraphicalChild:ce,axisComponents:[{axisType:"xAxis",AxisComp:qe},{axisType:"yAxis",AxisComp:Xe}],formatAxisMap:fr}),wt=Vt({chartName:"PieChart",GraphicalChild:ee,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Me},{axisType:"radiusAxis",AxisComp:Fe}],formatAxisMap:dr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Pe="/api";async function Cn(e,t,n="/portfolio/upload"){const r=new FormData;r.append("file",e);const i=await fetch(`${Pe}${n}`,{method:"POST",headers:{"X-User-Id":t},body:r});if(!i.ok)throw console.error("Upload failed:",i.statusText),new Error(`Upload failed: ${i.statusText}`);const o=await i.json();return console.log("Upload response:",o),o}async function In(e,t,n="/portfolio/metrics"){const r=`${Pe}${n}/${e}`,i=await fetch(r,{method:"GET",headers:{"X-User-Id":t}});if(!i.ok)throw console.error("Metrics fetch failed:",i.statusText),new Error(`Metrics fetch failed: ${i.statusText}`);const o=await i.json();return console.log("Metrics response:",o),o}async function Ln(e,t,n="/portfolio/value-over-time"){const r=`${Pe}${n}/${e}`,i=await fetch(r,{method:"GET",headers:{"X-User-Id":t}});if(!i.ok)throw new Error(`Error fetching portfolio value over time: ${i.statusText}`);return await i.json()}async function Rn(e,t,n,r){const i=await fetch(`${Pe}${r}/${e}?target_return=${t}`,{method:"GET",headers:{"X-User-Id":n}});if(!i.ok)throw new Error("Failed to fetch optimization");return await i.json()}async function zn(e,t,n,r,i,o,a){const l=await fetch(`${Pe}${n}/${e}?initial_investment=${r}&monthly_contribution=${i}&years=${o}&target_return=${a}`,{method:"GET",headers:{"X-User-Id":t}});if(!l.ok)throw new Error("Failed to fetch DCA simulation");return await l.json()}function Fn(){var fe,de;const[e,t]=I.useState(null),[n,r]=I.useState(null),[i,o]=I.useState(null),[a,l]=I.useState(!1),[f,c]=I.useState(""),[u,v]=I.useState([]),[d,y]=I.useState(null),[m,h]=I.useState([]),[g,A]=I.useState([]),[b,w]=I.useState(500),[T,O]=I.useState(10),[S,N]=I.useState("overview"),[_,D]=I.useState(30),k="user-1234",C=["#8884d8","#82ca9d","#ffc658","#ff7f50","#a4de6c","#d0ed57"],j=x=>typeof x!="number"||isNaN(x)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),z=x=>{x.target.files&&x.target.files[0]&&(t(x.target.files[0]),c(`Selected file: ${x.target.files[0].name}`))},q=async()=>{if(!e){c("Please select a CSV file before uploading.");return}l(!0),c("Uploading file...");try{const x=await Cn(e,k,"/portfolio/upload");r(x.portfolio_id),c("Upload successful!");const $=await In(x.portfolio_id,k,"/portfolio/metrics");$&&$.metrics&&o($.metrics);const L=await Ln(x.portfolio_id,k,"/portfolio/value-over-time");if(L&&L.monthly_portfolio_value){const Ke=Object.entries(L.monthly_portfolio_value).map(([F,Ve])=>({month:new Date(F+"-01").toLocaleString("default",{month:"short",year:"numeric"}),value:Ve}));v(Ke)}}catch(x){console.error("Upload failed:",x),c("Upload or metrics fetch failed. Check console for details.")}finally{l(!1)}};I.useEffect(()=>{S==="optimization"&&n&&G()},[S,n]);const G=async()=>{if(!n)return;const x=_/100;try{const $=await Rn(n,x,k,"/portfolio/optimize"),{optimization_result:L}=$;if(!L||!L.net_shares){c("Optimization failed. Allocation data is missing.");return}y({total_invested:L.total_invested,current_value:L.current_value,profit:L.profit,cagr:L.cagr,net_shares:L.net_shares});const Ke=Object.entries(L.net_shares).map(([We,we])=>({name:We,value:Number(we)}));h(Ke);const F=await zn(n,k,"/portfolio/dca-simulation",(i==null?void 0:i.current_value)||0,b,T,x);if(!F||!Array.isArray(F.dates)||!Array.isArray(F.actual_portfolio_values)||!Array.isArray(F.optimized_portfolio_values)||F.dates.length!==F.actual_portfolio_values.length||F.dates.length!==F.optimized_portfolio_values.length){console.error("Invalid DCA Simulation Response:",F),c("DCA Simulation failed. Response structure is unexpected.");return}const Ve=F.dates.map((We,we)=>({month:new Date(We+"-01").toLocaleString("default",{month:"short",year:"numeric"}),actual:Number(F.actual_portfolio_values[we]),optimized:Number(F.optimized_portfolio_values[we])}));A(Ve)}catch($){console.error("Optimization error:",$),c("An error occurred during optimization.")}},K=i?Object.entries(i.net_shares).map(([x,$])=>({name:x,value:$})):[];return s.jsxs(s.Fragment,{children:[s.jsx(mr,{children:s.jsx("div",{className:"ml-auto flex items-center space-x-4",children:s.jsx(vr,{})})}),s.jsxs(yr,{children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between space-y-2",children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Dashboard"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"file",accept:".csv",onChange:z}),e&&s.jsx("span",{className:"text-xs text-muted-foreground",children:e.name}),s.jsx(at,{onClick:q,size:"sm",disabled:a||!e,children:a?"Uploading...":"Upload CSV"})]})]}),f&&s.jsx("div",{className:"mb-2 text-sm text-muted-foreground",children:f}),s.jsxs(hr,{value:S,onValueChange:N,orientation:"vertical",defaultValue:"overview",className:"space-y-4",children:[s.jsxs(pr,{children:[s.jsx(ke,{value:"overview",children:"Overview"}),s.jsx(ke,{value:"analytics",children:"Analytics"}),s.jsx(ke,{value:"optimization",children:"Optimisation"}),s.jsx(ke,{value:"trending",children:"Trending"})]}),s.jsxs(st,{value:"overview",className:"space-y-2",children:[s.jsxs("div",{className:"grid gap-4 sm:grid-cols-4 lg:grid-cols-4",children:[s.jsxs(X,{children:[s.jsx(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Z,{className:"text-sm font-medium",children:"Total Portfolio Value"})}),s.jsx(J,{children:s.jsx("div",{className:"text-xl font-bold",children:i?j(i.current_value):"..."})})]}),s.jsxs(X,{children:[s.jsx(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Z,{className:"text-sm font-medium",children:"Total Invested"})}),s.jsx(J,{children:s.jsx("div",{className:"text-xl font-bold",children:i?j(i.total_invested):"..."})})]}),s.jsxs(X,{children:[s.jsx(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Z,{className:"text-sm font-medium",children:"Profits"})}),s.jsx(J,{children:s.jsx("div",{className:"text-xl font-bold",children:i?j(i.profit):"..."})})]}),s.jsxs(X,{children:[s.jsx(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Z,{className:"text-sm font-medium",children:"DCA CAGR"})}),s.jsx(J,{children:s.jsx("div",{className:"text-xl font-bold",children:i?`${i.cagr.toFixed(2)}%`:"..."})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-2",children:[s.jsx(Ee,{title:"Portfolio Allocation",children:K.length>0?s.jsx(Se,{width:"100%",height:"100%",children:s.jsxs(wt,{margin:{top:20,bottom:20,left:20,right:20},children:[s.jsx($e,{formatter:x=>j(x)}),s.jsx(ee,{data:K,dataKey:"value",nameKey:"name",outerRadius:90,label:({name:x,value:$,percent:L})=>`${x}: ${$} shares (${(L*100).toFixed(1)}%)`,labelLine:!1,children:K.map((x,$)=>s.jsx(He,{fill:C[$%C.length]},`cell-${$}`))})]})}):s.jsx("p",{className:"text-muted-foreground text-xs",children:"No data for pie chart"})}),s.jsx(Ee,{title:"Portfolio Value Over Time",children:u.length>0?s.jsx(Se,{width:"100%",height:"100%",children:s.jsxs(Pt,{data:u,margin:{top:20,right:30,left:40,bottom:20},children:[s.jsx(et,{vertical:!1}),s.jsx(qe,{dataKey:"month",tickLine:!0,axisLine:!1,tickMargin:6}),s.jsx(Xe,{tickFormatter:x=>j(x)}),s.jsx($e,{formatter:x=>j(x)}),s.jsx(ce,{dataKey:"value",type:"monotone",stroke:"#8884d8",strokeWidth:2,dot:!1})]})}):s.jsx("p",{className:"text-muted-foreground text-xs",children:"No data for line chart"})})]})]}),s.jsxs(st,{value:"optimization",className:"space-y-4",children:[s.jsxs(X,{children:[s.jsx(Y,{children:s.jsx(Z,{children:"Optimization Inputs"})}),s.jsx(J,{className:"flex flex-col gap-4",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Target CAGR (%):"}),s.jsx("input",{type:"number",value:_,onChange:x=>D(parseFloat(x.target.value)),step:"0.1",className:"border px-2 py-1 text-sm rounded w-24"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Monthly Contribution:"}),s.jsx("input",{type:"number",value:b,onChange:x=>w(parseFloat(x.target.value)),className:"border px-2 py-1 text-sm rounded w-24"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Years:"}),s.jsx("input",{type:"number",value:T,onChange:x=>O(parseInt(x.target.value)),className:"border px-2 py-1 text-sm rounded w-24"})]}),s.jsx(at,{size:"sm",onClick:G,children:"Optimize"})]})})]}),s.jsxs("div",{className:"grid gap-2 sm:grid-cols-4 lg:grid-cols-4",children:[s.jsxs(X,{children:[s.jsx(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Z,{className:"text-sm font-medium",children:"Optimized Portfolio Value"})}),s.jsx(J,{children:s.jsx("div",{className:"text-xl font-bold",children:d?j(d.current_value):"..."})})]}),s.jsxs(X,{children:[s.jsx(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Z,{className:"text-sm font-medium",children:"Total Invested"})}),s.jsx(J,{children:s.jsx("div",{className:"text-xl font-bold",children:d?j(d.total_invested):"..."})})]}),s.jsxs(X,{children:[s.jsx(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Z,{className:"text-sm font-medium",children:"Profits"})}),s.jsx(J,{children:s.jsx("div",{className:"text-xl font-bold",children:d?j(d.profit):"..."})})]}),s.jsxs(X,{children:[s.jsx(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Z,{className:"text-sm font-medium",children:"Optimized CAGR"})}),s.jsx(J,{children:s.jsx("div",{className:"text-xl font-bold",children:d?`${d.cagr.toFixed(2)}%`:"..."})})]})]}),s.jsx(Ee,{title:"Optimized Portfolio Allocation",children:m.length>0?s.jsx(Se,{width:"100%",height:300,children:s.jsxs(wt,{children:[s.jsx($e,{formatter:x=>`${x} shares`}),s.jsx(ee,{data:m,dataKey:"value",nameKey:"name",outerRadius:90,label:({name:x,value:$,percent:L})=>`${x}: ${$} shares (${(L*100).toFixed(1)}%)`,labelLine:!1,children:m.map((x,$)=>s.jsx(He,{fill:C[$%C.length]},`cell-optimized-${$}`))})]})}):s.jsx("p",{className:"text-muted-foreground text-xs",children:"No data for optimized pie chart"})}),s.jsx(Ee,{title:"DCA Simulation: Actual vs Optimized",children:g.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-4 py-2 text-xs text-muted-foreground",children:["Starting with",s.jsxs("span",{className:"font-semibold text-foreground",children:[" ",j((i==null?void 0:i.current_value)||0)," "]}),", and adding",s.jsxs("span",{className:"font-semibold text-foreground",children:[" ",j(b)," "]})," monthly, at ",s.jsxs("span",{className:"font-semibold text-foreground",children:[_.toFixed(1),"% annual"]}),", you reach",s.jsxs("span",{className:"font-bold text-green-600 text-base",children:[" ",j(((fe=g[g.length-1])==null?void 0:fe.optimized)||0)," "]}),"vs",s.jsxs("span",{className:"font-bold text-red-500 text-base",children:[" ",j(((de=g[g.length-1])==null?void 0:de.actual)||0)," "]}),"in ",s.jsxs("span",{className:"font-semibold text-foreground",children:[" ",T," yrs"]}),"."]}),s.jsx(Se,{width:"100%",height:300,children:s.jsxs(Pt,{data:g,margin:{left:60,right:24,top:12,bottom:12},children:[s.jsx(et,{vertical:!1,strokeDasharray:"3 3"}),s.jsx(qe,{dataKey:"month",tickFormatter:x=>{const $=x.split("-");return $.length===2?$[0]:""},tickLine:!1,axisLine:!0,tickMargin:8}),s.jsx(Xe,{tickFormatter:x=>typeof x!="number"?"":`$${Math.round(x).toLocaleString()}`}),s.jsx($e,{formatter:x=>j(x)}),s.jsx(ce,{dataKey:"actual",type:"monotone",stroke:"#ef4444",strokeWidth:2,dot:!1,name:"Actual Portfolio"}),s.jsx(ce,{dataKey:"optimized",type:"monotone",stroke:"#22c55e",strokeWidth:2,dot:!1,name:"Optimized Portfolio"})]})})]}):s.jsx("p",{className:"text-muted-foreground text-xs",children:"No data for DCA simulation"})})]})]})]})]})}function Ee({title:e,children:t}){return s.jsxs(X,{children:[s.jsx(Y,{children:s.jsx(Z,{className:"text-sm",children:e})}),s.jsx(J,{className:"h-[320px] p-0",children:t})]})}const ni=Fn;export{ni as component};
